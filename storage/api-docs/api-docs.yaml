openapi: 3.0.3
info:
  title: Pod Web API
  description: |-
    This is the official API documentation for the Pod Web application. It provides a comprehensive guide for developers building client applications (like the mobile app) to interact with the platform's backend services.

    The API is built following RESTful principles and uses standard HTTP features, including methods (GET, POST, PUT, DELETE) and response codes. All API responses are in JSON format.
  version: 1.0.0
servers:
  - url: https://your-production-domain.com/api/v1
    description: Production Server
  - url: http://localhost/api/v1
    description: Local Development Server
tags:
  - name: Authentication
    description: User authentication and account management
  - name: Users & Profiles
    description: Operations related to users and their profiles
  - name: Posts
    description: Managing user-generated posts, including text, images, and polls
  - name: Comments
    description: Managing comments on posts
  - name: Events
    description: Creating, managing, and registering for events
  - name: Job Listings
    description: Operations for job listings and applications
  - name: Internships
    description: Operations for internship listings and applications
  - name: Hackathons
    description: Managing hackathons, teams, and registrations
  - name: Notifications
    description: User notification management
  - name: Search
    description: Global search functionality across different resources

# ----------------------------------------------
# Security Schemes
# ----------------------------------------------
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        Enter your API token in the format: `Bearer {token}`.
        You can obtain a token by authenticating via the `/auth/login` or `/auth/register` endpoints.

# ----------------------------------------------
# Reusable Schemas (Data Models)
# ----------------------------------------------
  schemas:
    # --- Core Models ---
    User:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "John Doe"
        first_name:
          type: string
          example: "John"
        last_name:
          type: string
          example: "Doe"
        email:
          type: string
          format: email
          example: "john.doe@example.com"
        phone:
          type: string
          nullable: true
          example: "+1234567890"
        avatar:
          type: string
          format: uri
          nullable: true
          example: "https://example.com/storage/avatars/user.png"
        avatar_color:
          type: string
          example: "blue"
        bio:
          type: string
          nullable: true
          example: "Full-stack developer with a passion for open-source."
        title:
          type: string
          nullable: true
          example: "Software Engineer"
        company:
          type: string
          nullable: true
          example: "Tech Corp"
        city:
          type: string
          nullable: true
          example: "San Francisco"
        country:
          type: string
          nullable: true
          example: "USA"
        gender:
          type: string
          nullable: true
          enum: [male, female, other, prefer_not_to_say]
        skills:
          type: array
          nullable: true
          items:
            type: string
          example: ["Laravel", "Vue.js", "MySQL"]
        experience_level:
          type: string
          nullable: true
          enum: [entry, junior, mid, senior, lead, principal]
        education:
          type: string
          nullable: true
        portfolio_links:
          type: array
          nullable: true
          items:
            type: string
            format: uri
          example: ["https://my-portfolio.com"]
        linkedin_url:
          type: string
          format: uri
          nullable: true
        github_url:
          type: string
          format: uri
          nullable: true
        twitter_url:
          type: string
          format: uri
          nullable: true
        website_url:
          type: string
          format: uri
          nullable: true
        role:
          type: string
          example: "user"
        profile_completed:
          type: boolean
          example: true
        is_active:
          type: boolean
          example: true
        email_verified_at:
          type: string
          format: date-time
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Post:
      type: object
      properties:
        id:
          type: integer
          example: 101
        type:
          type: string
          enum: [text, image, poll]
          example: "image"
        content:
          type: string
          nullable: true
          example: "Check out this amazing photo!"
        images:
          type: array
          nullable: true
          items:
            type: string
            format: uri
          example: ["https://example.com/storage/posts/photo.jpg"]
        poll_options:
          type: array
          nullable: true
          items:
            type: object
            properties:
              text:
                type: string
              votes:
                type: integer
          example: [{"text": "Option A", "votes": 15}, {"text": "Option B", "votes": 8}]
        poll_ends_at:
          type: string
          format: date-time
          nullable: true
        hashtags:
          type: array
          nullable: true
          items:
            type: string
          example: ["#nature", "#photography"]
        likes_count:
          type: integer
          example: 23
        comments_count:
          type: integer
          example: 5
        shares_count:
          type: integer
          example: 2
        is_published:
          type: boolean
        is_featured:
          type: boolean
        is_liked:
          type: boolean
          description: "Indicates if the authenticated user has liked this post."
        has_voted:
          type: boolean
          description: "Indicates if the authenticated user has voted on this poll."
        is_poll_active:
          type: boolean
        can_edit:
          type: boolean
          description: "Indicates if the authenticated user can edit this post."
        user:
          $ref: '#/components/schemas/User'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Comment:
      type: object
      properties:
        id:
          type: integer
          example: 201
        content:
          type: string
          example: "This is a great comment!"
        user:
          $ref: '#/components/schemas/User'
        replies:
          type: array
          items:
            $ref: '#/components/schemas/Comment'
        created_at:
          type: string
          format: date-time

    Event:
      type: object
      properties:
        id:
          type: integer
        title:
          type: string
        description:
          type: string
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time
          nullable: true
        location:
          type: string
        format:
          type: string
          enum: [online, in-person, hybrid]
        max_attendees:
          type: integer
          nullable: true
        current_attendees:
          type: integer
        registration_deadline:
          type: string
          format: date-time
          nullable: true
        is_active:
          type: boolean
        is_registered:
          type: boolean
        registration_status:
          type: string
          nullable: true
          enum: [registered, waitlisted, checked_in, cancelled]
        can_edit:
          type: boolean
        category:
          $ref: '#/components/schemas/Category'
        creator:
          $ref: '#/components/schemas/User'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    JobListing:
      type: object
      properties:
        id:
          type: integer
        title:
          type: string
        description:
          type: string
        company_name:
          type: string
        location_type:
          type: string
          enum: [remote, on-site, hybrid]
        location:
          type: string
          nullable: true
        salary_min:
          type: number
          format: float
          nullable: true
        salary_max:
          type: number
          format: float
          nullable: true
        experience_level:
          type: string
          enum: [entry, junior, mid, senior, lead, principal]
        application_deadline:
          type: string
          format: date-time
          nullable: true
        status:
          type: string
          enum: [open, closed, archived]
        has_applied:
          type: boolean
        can_edit:
          type: boolean
        applications_count:
          type: integer
        category:
          $ref: '#/components/schemas/Category'
        poster:
          $ref: '#/components/schemas/User'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Notification:
      type: object
      properties:
        id:
          type: string
          format: uuid
        type:
          type: string
          example: "PostLiked"
        data:
          type: object
          description: "The content of the notification, structure varies by type."
        read_at:
          type: string
          format: date-time
          nullable: true
        created_at:
          type: string
          format: date-time
        time_ago:
          type: string
          example: "5 minutes ago"

    Category:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        slug:
          type: string
        is_active:
          type: boolean

    # --- Response Wrappers ---
    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          nullable: true
        message:
          type: string
          nullable: true

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
        errors:
          type: object
          nullable: true
          description: "Contains validation error messages."
          additionalProperties:
            type: array
            items:
              type: string

    PaginatedResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: array
          items:
            type: object
        meta:
          type: object
          properties:
            current_page:
              type: integer
            from:
              type: integer
            last_page:
              type: integer
            per_page:
              type: integer
            to:
              type: integer
            total:
              type: integer
        links:
          type: object
          properties:
            first:
              type: string
              format: uri
            last:
              type: string
              format: uri
            prev:
              type: string
              format: uri
              nullable: true
            next:
              type: string
              format: uri
              nullable: true

# ----------------------------------------------
# API Endpoints
# ----------------------------------------------
paths:
  # --- Authentication ---
  /auth/register:
    post:
      tags:
        - Authentication
      summary: Register a new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - first_name
                - last_name
                - email
                - password
                - password_confirmation
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
                password_confirmation:
                  type: string
                  format: password
      responses:
        '201':
          description: Registration successful
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          user:
                            $ref: '#/components/schemas/User'
                          token:
                            type: string
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/login:
    post:
      tags:
        - Authentication
      summary: Log in a user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          user:
                            $ref: '#/components/schemas/User'
                          token:
                            type: string
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/logout:
    post:
      tags:
        - Authentication
      summary: Log out the current user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Logged out successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/me:
    get:
      tags:
        - Authentication
      summary: Get the authenticated user's details
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # --- Posts ---
  /posts:
    get:
      tags:
        - Posts
      summary: Get a list of posts
      parameters:
        - name: page
          in: query
          schema:
            type: integer
        - name: per_page
          in: query
          schema:
            type: integer
        - name: type
          in: query
          schema:
            type: string
            enum: [text, image, poll]
        - name: search
          in: query
          schema:
            type: string
      responses:
        '200':
          description: A paginated list of posts
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Post'
    post:
      tags:
        - Posts
      summary: Create a new post
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                content:
                  type: string
                images:
                  type: array
                  items:
                    type: string
                    format: binary
                type:
                  type: string
                  enum: [text, image, poll]
      responses:
        '201':
          description: Post created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Post'
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /posts/{postId}:
    get:
      tags:
        - Posts
      summary: Get a single post
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Post'
        '404':
          description: Post not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      tags:
        - Posts
      summary: Update a post
      security:
        - bearerAuth: []
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
      responses:
        '200':
          description: Post updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Post'
        '403':
          description: Forbidden
        '404':
          description: Post not found
    delete:
      tags:
        - Posts
      summary: Delete a post
      security:
        - bearerAuth: []
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Post deleted
        '403':
          description: Forbidden
        '404':
          description: Post not found

  /posts/{postId}/like:
    post:
      tags:
        - Posts
      summary: Toggle like on a post
      security:
        - bearerAuth: []
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Like status toggled
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          liked:
                            type: boolean
                          likes_count:
                            type: integer

  # --- Comments ---
  /posts/{postId}/comments:
    get:
      tags:
        - Comments
      summary: Get comments for a post
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: A paginated list of comments
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Comment'
    post:
      tags:
        - Comments
      summary: Add a comment to a post
      security:
        - bearerAuth: []
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
                parent_id:
                  type: integer
                  nullable: true
      responses:
        '201':
          description: Comment created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Comment'

  # --- Events ---
  /events:
    get:
      tags:
        - Events
      summary: Get a list of events
      responses:
        '200':
          description: A paginated list of events
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Event'
    post:
      tags:
        - Events
      summary: Create a new event
      security:
        - bearerAuth: []
      requestBody:
        # Request body details omitted for brevity
        description: Full details in EventController@store
      responses:
        '201':
          description: Event created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Event'

  /events/{eventId}/register:
    post:
      tags:
        - Events
      summary: Register for an event
      security:
        - bearerAuth: []
      parameters:
        - name: eventId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Successfully registered
        '400':
          description: Bad request (e.g., registration closed)

  # --- Jobs ---
  /jobs:
    get:
      tags:
        - Job Listings
      summary: Get a list of job listings
      responses:
        '200':
          description: A paginated list of jobs
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/JobListing'

  /jobs/{jobId}/apply:
    post:
      tags:
        - Job Listings
      summary: Apply for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        # Request body for resume, cover letter etc.
        description: Full details in JobListingController@apply
      responses:
        '200':
          description: Application successful

  # --- Notifications ---
  /notifications:
    get:
      tags:
        - Notifications
      summary: Get user notifications
      security:
        - bearerAuth: []
      responses:
        '200':
          description: A paginated list of notifications
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Notification'

  /notifications/{notificationId}/read:
    patch:
      tags:
        - Notifications
      summary: Mark a notification as read
      security:
        - bearerAuth: []
      parameters:
        - name: notificationId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Notification marked as read

# --- Security Requirement ---
security:
  - bearerAuth: []
